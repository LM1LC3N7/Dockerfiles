# Rtorrent

rTorrent is an open-source BitTorrent client available on [GitHub](https://github.com/rakshasa/rtorrent/).
Starting from version 0.9.7, `rtorrent` can be launch as a daemon, no more `screen` or `tmux`.

There is a web UI to control rTorrent, [jfurrow/flood](https://github.com/jfurrow/flood), also available as a Dockerfile in this project.

## Build

* **Base image:** Alpine linux
* **`rtorrent` version:** Last version available on [edge testing alpine repository](http://dl-cdn.alpinelinux.org/alpine/edge/main)
* **Multi-stage:** No
* **Supervisor:** Yes, [`s6-overlay`](https://github.com/just-containers/s6-overlay#goals)

Command:

```bash
docker build -t lmilcent/rtorrent:alpine .
```

## Image details

* **Based on:** Alpine Linux
* **Layers:** 3
* **Size:** 32,6 Mio
* **Startup time:** 8 seconds
* **Auto-restart:** yes
* **Time Synchronization** yes, with host
* **Hardware limitations:** 2 CPU, 1024 Mio RAM, no SWAP
* **Low privileges** yes, running using `rtorrent` user
* **Capabilities limitations:** `chown`, `fowner`, `setuid`, `dac_override`

This image is using the `proxy` network in order to contact the `traefik` container (a proxy service).

Startup command, using the `appDeploy/startContainer` script:

```bash
startContainer rtorrent.cfg
```

Command generated by the script:

```bash
docker run \
  --detach \
  --tty \
  --name="rtorrent" \
  --restart=unless-stopped \
  --stop-timeout=10 \
  --volume /etc/localtime:/etc/localtime:ro \
  --volume /data/medias/downloaded:/app/rtorrent/download:rw \
  --volume rtorrent-config:/app/rtorrent/config:rw \
  --cpus=2 \
  --memory=1024m \
  --memory-swap=1024m \
  --memory-swappiness=0 \
  --publish 49184:49184 \
  --publish 49184:49184/udp \
  --network=proxy \
  --cap-drop=all \
  --cap-add=chown \
  --cap-add=fowner \
  --cap-add=setgid \
  --cap-add=setuid \
  --cap-add=dac_override \
  lmilcent/rtorrent:alpine
```
