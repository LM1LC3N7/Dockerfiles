# Netdata

Netdata is distributed, real-time, performance and health monitoring for systems and applications. It is a highly optimized monitoring agent you install on all your systems and containers. This project is available on [GitHub](https://github.com/netdata/netdata/).


## Build

* **Base image:** Alpine linux
* **`netdata` version:** Last version available on [GitHub release](https://github.com/netdata/netdata/releases)
* **Multi-stage:** No
* **Supervisor:** Yes, [`s6-overlay`](https://github.com/just-containers/s6-overlay#goals)

Command:

```bash
docker build -t lmilcent/netdata:alpine .
```

## Image details

* **Based on:** Alpine Linux
* **Layers:** 4
* **Size:** 41,7 Mio
* **Startup time:** 10 seconds
* **Auto-restart:** yes
* **Time Synchronization** yes, with host
* **Hardware limitations:** 1 CPU, 250 Mio RAM, no SWAP
* **Low privileges** yes, running using `netdata` user
* **Capabilities limitations:** `dac_override`, `SYS_PTRACE`

This image is using the `proxy` network in order to contact the `traefik` container (a proxy service).

Startup command, using the `appDeploy/startContainer` script:

```bash
startContainer config.cfg
```

Command generated by the script:

```bash
docker run \
  --tty \
  --detach \
  --label "traefik.enable=true" \
  --label "traefik.frontend.rule=Host:sub.domain.com" \
  --label "traefik.port=19999" \
  --label "traefik.backend=netdata" \
  --label "traefik.docker.network=proxy" \
  --label "traefik.frontend.entryPoints=http,https" \
  --label "traefik.frontend.redirect.entryPoint=https" \
  --label "traefik.protocol=http" \
  --label "traefik.frontend.headers.SSLRedirect=true" \
  --label "traefik.frontend.headers.browserXSSFilter=true" \
  --label "traefik.frontend.headers.contentTypeNosniff=true" \
  --label "traefik.frontend.headers.SSLHost=sub.domain.com" \
  --label "traefik.frontend.headers.frameDeny=true" \
  --label "traefik.frontend.headers.customFrameOptionsValue=ALLOW-FROM https://sub.domain.com" \
  --name="netdata" \
  --restart=unless-stopped \
  --stop-timeout=10 \
  --volume /etc/localtime:/etc/localtime:ro \
  --volume /proc:/host/proc:ro \
  --volume /sys:/host/sys:ro \
  --volume /var/run/docker.sock:/var/run/docker.sock:ro \
  --cpus=1 \
  --memory=250m \
  --memory-swap=250m \
  --memory-swappiness=0 \
  --network=proxy \
  --cap-drop=all \
  --cap-add=dac_override \
  --cap-add=SYS_PTRACE \
  lmilcent/netdata:alpine
```
