# Ghost

Ghost is a blogging plateform open-source and available on [GitHub](https://ghost.org)
This docker image automatically download the last version from [GitHub releases](https://github.com/TryGhost/Ghost/releases).


## Build

* **Base image:** Distroless
* **`ghost` version:** Last version available on the GitHub project
* **Multi-stage:** Yes
* **Supervisor:** No

Command:

```bash
docker build -t lmilcent/ghost:distroless .
```


## Image details

* **Based on:** Distroless
* **Layers:** 8
* **Size:** 220 Mio
* **Startup time:** 6 seconds
* **Auto-restart:** yes
* **Time Synchronization** no
* **Hardware limitations:** 1 CPU, 512 Mio RAM, no SWAP
* **Low privileges** no
* **Capabilities limitations:** none

This image is using the `proxy` network in order to contact the `traefik` container (a proxy service) and is also connected to `ghost-backend` to contact the database.
Before starting a new instance, the configuration should be updated in `ghost.env`.

Startup command, using the `appDeploy/startContainer` script:

```bash
startContainer ghost.cfg
```

Command generated by the script:

```bash
docker run \
  --label "traefik.enable=true" \
  --label "traefik.frontend.rule=Host:blog.lmilcent.com" \
  --label "traefik.port=2368" \
  --label "traefik.backend=Ghost" \
  --label "traefik.docker.network=proxy" \
  --label "traefik.frontend.entryPoints=http,https" \
  --label "traefik.frontend.redirect.entryPoint=https" \
  --label "traefik.protocol=http" \
  --name="ghost" \
  --detach \
  --restart=unless-stopped \
  --stop-timeout=10 \
  --volume ghost-content:/ghost/content:rw \
  --cpus=1 \
  --memory=512m \
  --memory-swap=512m \
  --memory-swappiness=0 \
  --network=proxy \
  --cap-drop=all \
  lmilcent/ghost:distroless
```
